<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="ie=edge" http-equiv="X-UA-Compatible">
<head>
    <meta charset="UTF-8">
    <title>Med360 | Hospital Search</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="{{ url_for('static', filename='css/navbar.css') }}" rel="stylesheet" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css" rel="stylesheet">
    <style>
    @import url(https://fonts.googleapis.com/css?family=Open+Sans);

    body{
      background: #f2f2f2;
      font-family: 'Open Sans', sans-serif;
    }
    form.searchBtn select {
      padding: 10px;
      font-size: 17px;
      float: left;
      width: 100%;
      background: #f1f1f1;
    }
    form.searchBtn button {
      width: 100%;
      padding: 10px;
      background: #2196F3;
      color: white;
      font-size: 17px;
      border: 1px solid grey;
      border-left: none;
      cursor: pointer;
    }
    form.searchBtn button:hover {
      background: #0b7dda;
    }
    form.searchBtn::after {
      content: "";
      clear: both;
      display: table;
    }

    .center {
      padding: 50% 0;
      text-align: center;
    }

    html, body {margin: 0; height: 100%; overflow: hidden}

    body {
      background-image: url("{{url_for('static', filename='search_bg.jpg')}}");
      background-size: cover;
      background-repeat: no-repeat;
      height: 100%;
      }

	</style>
    <script>
  window.console = window.console || function(t) {};

    </script>
    <script>

  if (document.location.search.match(/type=embed/gi)) {
    window.parent.postMessage("resize", "*");
  }
    </script>
</head>
<body translate="no">
<div id="body">
    <nav aria-label="main navigation" class="navbar" role="navigation">
        <div class="navbar-brand">
            <a class="navbar-item" href="{{ url_for('index') }}">
                <img height="28" src="{{url_for('static', filename='logo_small.PNG')}}" width="112">
            </a>

            <a aria-expanded="false" aria-label="menu" class="navbar-burger burger" data-target="navbarBasicExample"
               role="button">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>

        <div class="navbar-menu" id="navbarBasicExample">
            <div class="navbar-start">
                <a class="navbar-item" href="{{url_for('search_hospital') }}">
                    Search Hospitals
                </a>
                <a class="navbar-item" href="{{url_for('search_blood_donor')}}">
                    Search Blood Donor
                </a>
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                        More
                    </a>

                    <div class="navbar-dropdown">
                        <a class="navbar-item">
                            About
                        </a>
                        <a class="navbar-item">
                            Jobs
                        </a>
                        <a class="navbar-item">
                            Contact
                        </a>
                        <hr class="navbar-divider">
                        <a class="navbar-item">
                            Report an issue
                        </a>
                    </div>
                </div>
            </div>
            <div class="navbar-end">
                <div class="navbar-item">
                    <div class="buttons">
                        <a class="button is-primary" href="{{ url_for('view_profile') }}">
                            <strong>My Profile</strong>
                        </a>
                        <a class="button is-light" href="{{url_for('logout') }}">
                            Logout
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>
<form action="/search_hospital" class="searchBtn" id="log-form" method="POST" name="log-form"
      style="margin:auto;max-width:auto;padding:20vw">
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <ul class="alert">
        {% for message in messages %}
        <a class="notification is-danger">{{ message }}</a>
        {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}
    {{form.hidden_tag()}}
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column">
                    {{ form.state }}
                </div>
                <div class="column">
                    {{ form.city }}
                </div>
                <div class="column">
                    {{ form.spec }}
                </div>
                <div class="column">
                    {{ form.scheme }}
                </div>
                <div class="column">
                    <button type="submit">
                        <i aria-hidden="true" class="fa fa-search fa-lg"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>
</form>
<!--<script type="text/javascript">-->
<!--    window.history.forward();-->
<!--    function noBack() {-->
<!--        window.history.forward();-->
<!--    }-->
<!--</script>-->
<script>
        let state_select = document.getElementById('state')
        let city_select = document.getElementById('city')
        state_select.onclick= function(){
            state = state_select.value;
            fetch('/city/'+state).then(function(response){
                response.json().then(function(data){
                    let optionHTML = '';
                    for (city of data.cities){
                        optionHTML += '<option value="'+city.id+'">'+city.name+'</option>';
                    }
                    city_select.innerHTML = optionHTML;
                });
            });
        }
</script>
<script>
    function myFunction() {
  var x = document.getElementById("myTopnav");
  if (x.className === "topnav") {
    x.className += " responsive";
  } else {
    x.className = "topnav";
  }
}
</script>
</body>
</html>
